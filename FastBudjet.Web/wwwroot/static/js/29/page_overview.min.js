/*
 Copyright ?2017-2021 AppFer S.R.L. - All rights reserved. */
'use strict'; function ze() { let a = moment(); a.set({ hour: 23, minute: 59, second: 59 }); let b = a.valueOf(); const c = firebase.auth().currentUser; T.scheduledTransaction.where("nextDate").below(b).toArray(d => { d.forEach(e => { e.nextDate >= b || void 0 === e.value || $b(c, e, b) }) }) } function Ae() { S || ze() } var Be = null, Ce = !0;
$(() => {
    Kb(0, 0); X(!0).then(() => De()); if ("true" !== M("recentPurchase", "false")) {
        var a = p.user_subs_exp_date || 0; if (!S && a < Date.now() + 12096E5) {
            var b = a < Date.now() + 2592E5; if (b || parseInt(M("noSubsExpAlertUntil", 0)) < Date.now()) {
                var c = $("#alert_subs_expiration"); c.removeClass("hidden-element"); a = p.subscription_expire_soon.replace("%s", y(a, w)); c.find("div.alert_txt").text(a); c.find("a").on("click touch", function (d) { d.preventDefault(); $("#sidebar").find("#navbutton_user").trigger("click") }); c = c.find("button");
                if (b) c.addClass("hidden-element"); else c.on("click touch", () => { E("noSubsExpAlertUntil", Date.now() + 864E5) })
            }
        }
    } b = $("#loading_animation_container").first(); c = $("#card_ov_summary"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_ov_s_this_month"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_ov_s_last_month"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c =
        $("#card_overview_last_days_chart"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_overview_accounts"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_overview_ccards"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_overview_balance_chart"); c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); c = $("#card_overview_budgets");
    c.append(b.html()); c.find("#loading_animation_container").removeClass("hidden-element"); xb(!1, !1, !0); S || "true" !== oa("recentLogin", "false") || "true" === M("do_not_show_public_pc_mex", "false") || (G("recentLogin", null), H(null, p.log_out_on_public_pc + "\n" + p.action_button_top_right, null, !0, () => { $("#modal_message_checkbox").is(":checked") && E("do_not_show_public_pc_mex", "true") }))
});
function De() {
    if (null != U && 0 < U.size) populateOverviewPage(); else {
        var a = !1; T.categories.limit(1).each(() => { a = !0 }).then(() => {
            a ? populateOverviewPage() : ($.ajax({ url: p.url_get_translations, method: "POST", dataType: "json", contentType: "application/json", data: JSON.stringify({ ids: "data_not_saved_online synchronization set_up_sync sign_out wait contact_email data_initialization data_selection_app_or_web action_continue".split(" ") }) }).done(b => {
                "true" === M("recentPurchase", "false") ? Ee(b) : (sa(b.synchronization, b.data_not_saved_online +
                    "\n" + b.set_up_sync + " (Android/iOS)\n\n" + b.contact_email, b.sign_out, () => { la() }), $("#modal_message_x_to_close").addClass("hidden-element"), $("#modal_message_close").hide())
            }).fail(() => { B() }), $("#card_ov_summary").find(".loading_background").addClass("hidden-element"), $("#card_ov_s_last_month").find(".loading_background").addClass("hidden-element"), $("#card_ov_s_last_month").find(".loading_background").addClass("hidden-element"), $("#card_overview_accounts").find(".loading_background").addClass("hidden-element"),
                $("#card_overview_ccards").find(".loading_background").addClass("hidden-element"), $("#card_overview_budgets").find(".loading_background").addClass("hidden-element"), $("#card_overview_balance_chart").find(".loading_background").addClass("hidden-element"), $("#card_overview_last_days_chart").find(".loading_background").addClass("hidden-element"), $("#card_overview_debts").find(".loading_background").addClass("hidden-element"))
        })
    }
}
function Ee(a) {
    $("#modal_message_title").text(a.data_initialization); $("#modal_message_content").text(a.data_selection_app_or_web); $("#modal_message_header").show(); $("#modal_message_checkbox_parent").hide(); var b = $("#modal_message_close"); b.text(a.sign_out); b.show(); b.off("click touch").on("click touch", () => { $("#modal_message").modal("hide"); la() }); b = $("#modal_message_confirmation"); b.text(a.action_continue); b.off("click touch").on("click touch", () => {
        H(null, p.wait); $("#progress_waiting_container_internal").removeClass("hidden-element");
        ja("/static/" + (!0 === p.use_min_files ? "js/" + p.js_version + "/user_data_generator.min.js" : "javascript/other/user_data_generator.js"), () => { se().then(() => { $("#progress_waiting_container_internal").addClass("hidden-element"); $("#modal_message").modal("hide"); E("recentPurchase", null); location.reload() }).catch(() => { $("#progress_waiting_container_internal").addClass("hidden-element"); B() }) })
    }); $("#modal_message").modal({ backdrop: "static", keyboard: !1, show: !0 })
}
function populateOverviewPage() {
    let a = Fe(), b = Ge(), c = He(); Promise.all([a, b, c]).then(d => {
        Ce && ("requestIdleCallback" in window ? requestIdleCallback(Ae, { timeout: 2E3 }) : setTimeout(Ae, 1E3)); let e = d[1]; d = d[2]; var f = $("#summary_total_balance"); f.text(x(e, w, R)); fb(f, e); f = $("#summary_credit_cards"); f.text(x(d, w, R)); fb(f, d); d = moment(); let h = parseInt(M("firstDayMonth", 1)); h > d.date() && d.add(-1, "month"); d.set({ date: h, hour: 0, minute: 0, second: 0, millisecond: 0 }); let k = d.valueOf(); d.add(1, "month"); d.set({
            hour: 23, minute: 59,
            second: 59, millisecond: 999
        }); let l = d.valueOf(); d = T.transactions.where(["ei", "date"]).between([1, k], [1, l], !0, !0).toArray(m => { let n = 0; m.forEach(q => { n = Rb(n, q, !0).total }); m = $("#summary_monthly_incomes"); m.text(x(n, w, R)); fb(m, n); return Promise.resolve(n) }); f = T.transactions.where(["ei", "date"]).between([0, k], [0, l], !0, !0).toArray(m => { let n = 0; m.forEach(q => { n = Rb(n, q, !0).total }); m = $("#summary_monthly_expenses"); m.text(x(n, w, R)); fb(m, n); return Promise.resolve(n) }); Promise.all([d, f]).then(m => {
            var [n, q] = m; m = n +
                q; let r = $("#summary_monthly_total"); r.text(x(m, w, R)); fb(r, m); m = $("#summary_this_month_title"); 1 === h ? m.html("<b>" + p.this_month + "</b>") : m.html("<b>" + p.this_month + "</b> (" + y(k, P) + " - " + y(l, P) + ")"); $("#card_overview_summary").find(".loading_background").addClass("hidden-element")
        }); Ie(e)
    }).then(() => { Je(); Ke(); Le() }).then(() => { Ce = !1; S || ne() })
}
function Fe() {
    let a = []; var b = moment(); b.endOf("month"); b.set({ hour: 23, minute: 59, second: 59, millisecond: 999 }); const c = b.valueOf(); b.set({ date: 1, hour: 0, minute: 0, second: 0, millisecond: 0 }); const d = b.valueOf(); b.add(-1, "millisecond"); const e = b.valueOf(); b.set({ date: 1, hour: 0, minute: 0, second: 0, millisecond: 0 }); const f = b.valueOf(); let h = [p.income, p.expenses], k = ["#4CAF50", "#F44336"]; a.push(new Promise(function (l) {
        return g(function* () {
            var m = $("#overview_s_this_month_canvas"); 1200 > $(window).width() && m.parent().removeClass("w-50").addClass("w-40");
            var n = yield Qb(1, d, c), q = yield Qb(0, d, c), r = 1E6 > n && 1E6 > q; Me(m, h, [n, q], k); m = $("#ov_this_month_incomes_val"); m.text(r ? x(n, w, R) : Ea(n, w, R)); fb(m, n); m = $("#ov_this_month_expenses_val"); m.text(r ? x(q, w, R) : Ea(q, w, R)); fb(m, q); n += q; q = $("#ov_this_month_total_val"); q.text(r ? x(n, w, R) : Ea(n, w, R)); fb(q, n); r = $("#card_ov_s_this_month"); r.find(".loading_background").addClass("hidden-element"); (1200 > $(window).width() ? r.find("#card_ov_s_this_month_click") : r).off("click touch").on("click touch", () => { $("#navbutton_transactions").trigger("click") });
            return l()
        })
    })); a.push(new Promise(function (l) {
        return g(function* () {
            var m = $("#overview_s_last_month_canvas"); 1200 > $(window).width() && m.parent().removeClass("w-50").addClass("w-40"); var n = yield Qb(1, f, e), q = yield Qb(0, f, e), r = 1E6 > n && 1E6 > q; Me(m, h, [n, q], k); m = $("#ov_last_month_incomes_val"); m.text(r ? x(n, w, R) : Ea(n, w, R)); fb(m, n); m = $("#ov_last_month_expenses_val"); m.text(r ? x(q, w, R) : Ea(q, w, R)); fb(m, q); n += q; q = $("#ov_last_month_total_val"); q.text(r ? x(n, w, R) : Ea(n, w, R)); fb(q, n); r = $("#card_ov_s_last_month"); r.find(".loading_background").addClass("hidden-element");
            (1200 > $(window).width() ? r.find("#card_ov_s_last_month_click") : r).off("click touch").on("click touch", () => { t.set("selectedPeriod", -1); $("#navbutton_transactions").trigger("click") }); return l()
        })
    })); b = $("#card_ov_summary"); b.find(".loading_background").addClass("hidden-element"); b.off("click touch").on("click touch", () => { $("#navbutton_accounts").trigger("click") }); return Promise.all(a).then(() => Promise.resolve(!0))
}
function Me(a, b, c, d) { new Chart(a, { type: "doughnut", data: { datasets: [{ data: c, backgroundColor: d }], labels: b }, options: { responsive: !0, maintainAspectRatio: !1, layout: { padding: { top: 5, left: 5, right: 5, bottom: 5 } }, tooltips: { callbacks: { label: function (e, f) { return " " + f.labels[e.index] + ": " + x(parseFloat(f.datasets[e.datasetIndex].data[e.index]), w, R) } } }, legend: { display: !1 }, plugins: { labels: [{ fontSize: 13.5, fontColor: "#000", precision: 1, render: function (e) { return parseFloat(e.percentage).toFixed(1) + "%" } }] } } }) }
function Ge() {
    const a = M("overview_accounts_number", 4); Ne(a); return T.accounts.toArray(b => {
        b.sort((h, k) => h.position - k.position); let c = $("#overview_list_accounts"); c.empty(); const d = $("#template_account_overview").html(); let e = 0, f = 0; b.forEach(h => {
            if ((0 === h.visibility || 1 === h.visibility) && f < a) {
                {
                    c.append(d); var k = $("div[id=t_account_overview_container]").last(), l = k.find("#t_account_overview_name"); l.text(h.name); 1200 > $(window).width() ? 16 < h.name.length && (l.removeClass("big_text_2"), 30 > h.name.length && l.addClass("big_text_1")) :
                        25 < h.name.length && (l.removeClass("big_text_2"), l.addClass("big_text_1")); l = V.get(h.name); let m = h.isoCurrency.split("-")[0].trim(), n = k.find("#t_account_overview_value"); n.text(null != l ? x(parseFloat(l), w, m ? m : R) : "-"); fb(n, l); k.find("#t_account_overview_currency").text(h.isoCurrency)
                } f++
            } if (1 > h.visibility) return !0; k = V.get(h.name); isNaN(k) || (e += k / h.exchangeRate)
        }); $("hr[id=t_account_overview_divider]").last().addClass("hidden-element"); b = $("#card_overview_accounts"); b.find(".loading_background").addClass("hidden-element");
        b.off("click touch").on("click touch", () => { $("#navbutton_accounts").trigger("click") }); return Promise.resolve(e)
    })
}
function Ne(a) {
    $("#overview_list_accounts_options").off("click touch").on("click touch", function (b) {
        b.preventDefault(); b.stopPropagation(); b.cancelBubble = !0; $("#modal_card_options_title").text(p.accounts); let c = $("#select_number_items_card_options"); c.empty(); for (b = 1; 10 > b; b++)c.append("<option> " + b + " </option>"); c.val(a); $("#button_card_options_save").off("click touch").on("click touch", function () { E("overview_accounts_number", c.val()); $("#modal_card_options").modal("hide"); Ge() }); $("#button_card_options_cancel").off("click touch").on("click touch",
            function () { $("#modal_card_options").modal("hide") }); $("#modal_card_options").modal("show")
    })
}
function He() {
    const a = M("overview_credit_cards_number", 3); Oe(a); return T.creditCards.toArray(b => {
        let c = $("#overview_list_ccards"); c.empty(); let d = 0; const e = $("#template_ccard_overview").html(); b.sort((h, k) => h.position - k.position); let f = 0; b.forEach(h => { 1 === h.visibility && f < a && (Pe(h, e, c), f++); let k = V.get(h.name); isNaN(k) || (d += k / h.exchangeRate) }); if (0 === f) return c.append('<div class="w-100 text-center mt-3">' + p.no_credit_card_found + "</div>"), $("#card_overview_ccards").find(".loading_background").addClass("hidden-element"),
            Promise.resolve(0); $("hr[id=t_ccard_overview_divider]").last().addClass("hidden-element"); b = $("#card_overview_ccards"); b.find(".loading_background").addClass("hidden-element"); b.off("click touch").on("click touch", function () { $("#navbutton_ccards").trigger("click") }); return Promise.resolve(d)
    })
}
function Oe(a) {
    $("#overview_list_ccards_options").off("click touch").on("click touch", function (b) {
        b.preventDefault(); b.stopPropagation(); b.cancelBubble = !0; $("#modal_card_options_title").text(p.credit_cards); let c = $("#select_number_items_card_options"); c.empty(); for (b = 1; 10 > b; b++)c.append("<option> " + b + " </option>"); c.val(a); $("#button_card_options_save").off("click touch").on("click touch", function () { E("overview_credit_cards_number", c.val()); $("#modal_card_options").modal("hide"); He() }); $("#button_card_options_cancel").off("click touch").on("click touch",
            function () { $("#modal_card_options").modal("hide") }); $("#modal_card_options").modal("show")
    })
}
function Pe(a, b, c) {
    c.append(b); b = $("div[id=t_ccard_overview_container]").last(); b.find("#t_ccard_overview_name").text(a.name); c = a.isoCurrency.split("-")[0].trim(); var d = b.find("#t_ccard_overview_value"), e = parseFloat(V.get(a.name)); isNaN(e) ? d.text("-") : (d.text(x(e, w, c ? c : R)), fb(d, e), d = b.find("#t_ccard_overview_progress"), e >= .95 * a.limit ? d.css({ "background-color": "#F44336" }) : e >= .75 * a.limit ? d.css({ "background-color": "#FF9800" }) : d.css({ "background-color": "#4CAF50" }), d.css({
        width: Math.abs(e) / a.limit * 100 +
            "%"
    }), c = x(Math.abs(e), w, c ? c : R) + " / " + x(a.limit, w, c ? c : R) + "  (" + (Math.abs(e) / a.limit).toLocaleString(w, { style: "percent" }) + ")", e = d.parent().parent(), e.prop("title", c), e.tooltip(), e.on("click touch", function (f) { f.stopPropagation(); f.preventDefault() })); b.find("#t_ccard_overview_currency").text(a.isoCurrency)
}
function Je() {
    var a = void 0 === a ? 1 : a; Qe(); let b = []; a *= 864E5; var c = new Date; c = (new Date(c.getFullYear(), c.getMonth(), c.getDate() + 1, 0, 0, 0)).getTime() - 1; let d = c - a, e = c - a / 2; for (let f = 0; 7 > f; f++) {
        0 !== f && (d -= a, c -= a, e -= a); let h = 0, k = 0; const l = qa((new Date(e)).toLocaleDateString(w, { weekday: "short", day: "numeric" })); b.push(T.transactions.where("date").between(d, c, !0, !0).toArray(m => {
            m.forEach(n => {
                if ("Transfer between accounts" !== n.category && "CCARD_Monthly_Bill" !== n.category && "CCARD_Manual_Bill" !== n.category) {
                    var q =
                        U.get(n.account); null != q && "0" !== q[1] && (0 < q[3] ? 1 === n.ei ? h += n.value / q[3] : k += n.value / q[3] : 1 === n.ei ? h += n.value : k += n.value)
                }
            }); return Promise.resolve([l, h, k])
        }))
    } Promise.all(b).then(f => {
        f = f.reverse(); let h = [], k = [], l = [], m = 0; f.forEach((q, r) => { h.push(q[0]); k.push(q[1]); l.push(q[2]); 0 < r ? (m < q[1] && (m = q[1]), m < q[2] && (m = q[2])) : m = q[1] > q[2] ? q[1] : q[2] }); f = $("#card_overview_last_days_chart"); f.find(".loading_background").addClass("hidden-element"); f.off("click touch").on("click touch", function () { $("#navbutton_transactions").trigger("click") });
        switch (M("overview_last_days_type", "both")) { case "incomes": f = [{ data: k, backgroundColor: "#4caf50", hoverBackgroundColor: "#43a047" }]; break; case "expenses": f = [{ data: l, backgroundColor: "#f44336", hoverBackgroundColor: "#e53935" }]; break; default: f = [{ data: k, backgroundColor: "#4caf50", hoverBackgroundColor: "#43a047" }, { data: l, backgroundColor: "#f44336", hoverBackgroundColor: "#e53935" }] }if (null != Be) Be.data.labels = h, Be.data.datasets = f, Be.update(); else {
            var n = $("#overview_last_days_chart"); Be = new Chart(n, {
                type: "bar", data: {
                    labels: h,
                    datasets: f
                }, options: { responsive: !0, maintainAspectRatio: !1, scales: { xAxes: [{ gridLines: { display: !1 }, ticks: { padding: 10, maxRotation: 40, minRotation: 0 } }], yAxes: [{ gridLines: { drawBorder: !1 }, ticks: { min: 0, padding: 5, beginAtZero: !0, callback: function (q) { return 100 > m ? x(parseFloat(q), w, R) : Ea(parseFloat(q), w, R) } } }] }, legend: { display: !1, maintainAspectRatio: !1 }, tooltips: { callbacks: { label: function (q, r) { return " " + x(parseFloat(r.datasets[q.datasetIndex].data[q.index]), w, R) } } }, plugins: { labels: { render: function () { return "" } } } }
            })
        }
    })
}
function Qe() {
    $("#overview_list_last_days_options").off("click touch").on("click touch", function (a) {
        a.preventDefault(); a.stopPropagation(); a.cancelBubble = !0; $("#modal_card_options_title").text(p.last_7_days); let b = $("#select_number_items_card_options"); b.empty(); b.append("<option value='incomes'> " + p.income + " </option>"); b.append("<option value='expenses'> " + p.expenses + " </option>"); b.append("<option value='both'> " + p.both + " </option>"); b.val(M("overview_last_days_type", "both")); $("#button_card_options_save").off("click touch").on("click touch",
            function () { E("overview_last_days_type", b.val()); $("#modal_card_options").modal("hide"); Je() }); $("#button_card_options_cancel").off("click touch").on("click touch", function () { $("#modal_card_options").modal("hide") }); $("#modal_card_options").modal("show")
    })
}
function Ke() {
    const a = M("overview_budgets_number", 3); Re(a); T.budgets.toArray(b => {
        let c = $("#overview_list_budgets"); c.empty(); if (0 === b.length) return c.append('<div class="w-100 text-center mt-3">' + p.budget_not_found.replace(".", "") + "</div>"), $("#card_overview_budgets").find(".loading_background").addClass("hidden-element"), Promise.resolve(0); const d = $("#template_budget").html(); let e = 0; b.forEach(f => { 2 !== f.period && e < a && !(3 === f.period && 53568E5 < f.dateTo - f.dateFrom) && (ub(f, d, c, !1), e++) }); b = $("#card_overview_budgets");
        b.find(".loading_background").addClass("hidden-element"); b.off("click touch").on("click touch", () => { $("#navbutton_budgets").trigger("click") }); return Promise.resolve()
    })
}
function Re(a) {
    $("#overview_list_budgets_options").off("click touch").on("click touch", function (b) {
        b.preventDefault(); b.stopPropagation(); b.cancelBubble = !0; $("#modal_card_options_title").text(p.budgets); let c = $("#select_number_items_card_options"); c.empty(); for (b = 1; 10 > b; b++)c.append("<option> " + b + " </option>"); c.val(a); $("#button_card_options_save").off("click touch").on("click touch", function () { E("overview_budgets_number", c.val()); $("#modal_card_options").modal("hide"); Ke() }); $("#button_card_options_cancel").off("click touch").on("click touch",
            function () { $("#modal_card_options").modal("hide") }); $("#modal_card_options").modal("show")
    })
}
function Le() {
    const a = M("overview_debts_number", 3); Se(a); T.debts.orderBy("position").toArray(b => {
        let c = $("#overview_list_debts"); c.empty(); const d = $("#template_debt").html(); let e = 0; b.forEach(f => { if (!(e >= a) && 0 <= f.position) { let h = U.get(f.account); h && "1" !== h[1] || (Te(f, d, c), e++) } }); if (0 === e) return c.append('<div class="w-100 text-center mt-3">' + p.no_debts_found + "</div>"), $("#card_overview_debts").find(".loading_background").addClass("hidden-element"), Promise.resolve(0); $("hr[id=t_debt_divider]").last().addClass("hidden-element");
        b = $("#card_overview_debts"); b.find(".loading_background").addClass("hidden-element"); b.off("click touch").on("click touch", function () { $("#navbutton_debts").trigger("click") }); return Promise.resolve(0)
    })
}
function Se(a) {
    $("#overview_list_debts_options").off("click touch").on("click touch", function (b) {
        b.preventDefault(); b.stopPropagation(); b.cancelBubble = !0; $("#modal_card_options_title").text(p.debts); let c = $("#select_number_items_card_options"); c.empty(); for (b = 1; 10 > b; b++)c.append("<option> " + b + " </option>"); c.val(a); $("#button_card_options_save").off("click touch").on("click touch", function () { E("overview_debts_number", c.val()); $("#modal_card_options").modal("hide"); Le() }); $("#button_card_options_cancel").off("click touch").on("click touch",
            function () { $("#modal_card_options").modal("hide") }); $("#modal_card_options").modal("show")
    })
}
function Te(a, b, c) {
    c.append(b); c = 0 < a.value - a.repaidAmount ? a.value - a.repaidAmount : 0; b = $("div[id=t_debt_container]").last(); b.children().first().removeClass("item_selector_light"); var d = 0 === a.type ? p.debt + ": " + a.fromTo + " \u279c " + p.you : p.credit + ": " + p.you + " \u279c " + a.fromTo; b.find("#t_debt_name").text(d); b.find("#t_debt_icon").on("error", function () { $(this).attr("src", "/static/icons/ic_blank_grey.svg") }).attr("src", "/static/icons/" + (0 === a.type ? "ic_cash_debt" : "ic_cash_credit") + ".svg"); b.find("#t_debt_date_from").text(y(a.date,
        P)); d = a.paybackDate > Date.now() || 0 >= c ? y(a.paybackDate, P) : '<span style="color:red">' + y(a.paybackDate, P) + "</span>"; b.find("#t_debt_date_to").html(d); d = U.get(a.account); b.find("#t_debt_zero_value").text(x(0, w, d ? d[0] : R)); b.find("#t_debt_repaid_amount").text(x(a.repaidAmount, w, d ? d[0] : R)); b.find("#t_debt_value").text(x(a.value, w, d ? d[0] : R)); d = x(c, w, d ? d[0] : R); d = 0 === c ? d + " (" + p.paid + ")" : 0 === a.type ? '<span style="color:red">' + d + "</span>" : '<span style="color:green">' + d + "</span>"; b.find("#t_debt_residual_amount").html(p.residual_amount +
            " " + d); c = a.repaidAmount / a.value * 100; 0 > c ? c = 0 : 100 < c && (c = 100); b.find("#t_debt_repaid_percentage").text((new Intl.NumberFormat(w, { style: "percent", maximumFractionDigits: 0 })).format(c / 100)); d = b.find("#t_debt_progress"); 0 === a.type ? d.css({ "background-color": "#F44336" }) : d.css({ "background-color": "#4CAF50" }); d.css({ width: c + "%" }); b.find("#t_debt_options").addClass("hidden-element")
}
function Ie(a) {
    let b = []; var c = new Date; c.setHours(23, 59, 59, 999); let d = c.getTime(), e = d - 6048E5 + 1; b.push(Promise.resolve([qa((new Date(c.getTime())).toLocaleDateString(w, { month: "short", day: "numeric" })), a])); for (c = 0; 10 > c; c++) {
        0 !== c && (e -= 6048E5, d -= 6048E5); const f = qa((new Date(d)).toLocaleDateString(w, { month: "short", day: "numeric" })); b.push(T.transactions.where("date").between(e, d, !0, !0).toArray(h => {
            h.forEach(k => {
                let l = U.get(k.account); null != l && "1" !== l[2] && "0" !== l[1] && (a = 1 !== l[3] && 0 < l[3] ? a - (1 === k.ei ? k.value :
                    -k.value) / l[3] : a - (1 === k.ei ? k.value : -k.value))
            }); return Promise.resolve([f, a])
        }))
    } Promise.all(b).then(f => {
        f.reverse(); let h = [], k = [], l = 0, m = 0; f.forEach((r, u) => { u !== f.length - 2 && (h.push(r[0]), k.push(r[1]), 0 < u ? (l < r[1] && (l = r[1]), m > r[1] && (m = r[1])) : (l = r[1], m = r[1])) }); let n = m - (l - m) / 100 * 5; if (0 >= m || 0 >= n) n = m; $("#card_overview_balance_chart").find(".loading_background").addClass("hidden-element"); const q = $("#overview_balance_chart"); null != q && new Chart(q, {
            type: "line", data: {
                labels: h, datasets: [{
                    data: k, borderColor: "#2196F3",
                    borderWidth: 2, backgroundColor: "rgba(13, 71, 161, 0.2)", pointColor: "#2196F3", pointBackgroundColor: "#2196F3", pointRadius: 3, pointHoverBackgroundColor: "#0D47A1", pointHoverRadius: 6, lineTension: 0
                }]
            }, options: {
                responsive: !0, maintainAspectRatio: !1, scales: {
                    xAxes: [{ gridLines: { drawTicks: !1, display: !1 }, ticks: { padding: 10, maxRotation: 40, minRotation: 30 } }], yAxes: [{
                        gridLines: { drawBorder: !1 }, ticks: {
                            beginAtZero: !1, suggestedMin: n, padding: 5, callback: function (r) {
                                r = parseFloat(r); var u = l, v = w; return 1E6 <= u ? Ea(r, v, R).replace((new Intl.NumberFormat(v,
                                    { style: "decimal", maximumFractionDigits: 0 })).format(r), (r / 1E6).toFixed(1).replace(/\.0$/, "") + "M") : 1E4 <= u ? Ea(r, v, R).replace((new Intl.NumberFormat(v, { style: "decimal", maximumFractionDigits: 0 })).format(r), (r / 1E3).toFixed(1).replace(/\.0$/, "") + "k") : 100 <= u ? Ea(parseFloat(r), v, R) : x(parseFloat(r), v, R)
                            }
                        }
                    }]
                }, legend: { display: !1, maintainAspectRatio: !1 }, tooltips: { displayColors: !1, callbacks: { label: function (r, u) { return x(parseFloat(u.datasets[r.datasetIndex].data[r.index]), w, R) } } }
            }
        })
    })
};
